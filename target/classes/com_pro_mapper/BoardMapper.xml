<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  <mapper namespace="com_pro_mapper.BoardMapper">
  
  <select id="boardlist" resultType="com.myproject.model.BoardDTO" >
  select * from board;
  </select>
  <insert id="boardwrite">
  insert into board(title,content,id) values(#{title},#{content},#{id});
  
  </insert>
  <select id="boarddetail" resultType="com.myproject.model.BoardDTO">
  select * from board
  where bno=#{bno}
  
  </select>
  <delete id="boardremove">
 delete from board
 where bno=#{bno}
 </delete>
  <update id="boardmodify">
  update board
  set title = #{title},
  content=#{content}
  where bno=#{bno}
  </update>
  <update id="boardcnt">
  update board
  set cnt = cnt + 1
  where bno=#{bno}
  </update>
  
  <select id="boardpage" resultType="com.myproject.model.BoardDTO">
    
      select *
			from( 
				select @rownum:=@rownum+1 rownum, b.*
				from board b, (select @rownum:=0) as tmp
				
			    order by bno desc
			) as boardlist
			<![CDATA[
			where rownum > (#{pageNum}-1)*#{amount} and rownum <= #{pageNum}*#{amount}
			]]>
    </select>
    
    <select id="getTotal" resultType="int">
    
        select count(*) from board
    
    </select>
  
  
  
  </mapper>